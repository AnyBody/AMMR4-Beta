/* ----------------------------------------------------------------
Drivers for the model:

-The pelvis is locked to the ground 
-The remaining degrees of freedom are controlled by parameters in the mannequin.any file.
-This file is a good way to get an overview of the dof in the full body model
 all the dof in the body model is driven from this file.
-In total 

Soeren, March 1, 2006.
----------------------------------------------------------------  */

AnyFolder Drivers = {

  #include "../../../Body/AAUHuman/BodyModels/include/MannequinDrivers.any"

  // Aliases for convenient referencing
  AnyFolder &JntPos=..Mannequin.Posture;  
  AnyFolder &JntVel=..Mannequin.PostureVel;  
  
  AnyFolder &RefHM = .HumanModel;
   
  
  
  AnyDrawWidgetLin PelvisPosLin =   {
    //Visible = On;
    //Opacity = 1;
    Operation = &Main.InitialPosStudy.InitialConditions;
    UpdateEvent = OnMouseRelease;
    //MaxDrawSize = 1;
    //MinDrawSize = 0;
    RefFrame =&Main.InitialPosStudy.EnvironmentModel.GlobalRef ;
    Target = &Main.TrialSpecificData.InitialPositionOfBody.PelvisPos;
    //RelPos = ;
    
    AnyMat33 test=Main.HumanModel.BodyModel.Trunk.SegmentsLumbar.PelvisSeg.Axes;
    RelRotMat = &test;
    //AxisOnOff = {On, On, On};
  };

  
  AnyDrawWidgetRot PelvisPosRot =   {
    //Visible = On;
    //Opacity = 1;
    Operation = &Main.InitialPosStudy.InitialConditions;
    UpdateEvent = OnMouseRelease;
    MaxDrawSize = 1;
    MinDrawSize = 0;
    RefFrame =&Main.HumanModel.BodyModel.Trunk.SegmentsLumbar.PelvisSeg.WidgetRotNode;
    Target = &Main.TrialSpecificData.InitialPositionOfBody.PelvisRotMatrix;
    AxisOnOff = {On, On, On};
 };

 
 AnyKinEqSimpleDriver PelvisPosRotDriver ={
   
   DriverPos={0,0,0};
   DriverVel={0,0,0};
   
   AnySeg &pelvis = Main.HumanModel.BodyModel.Trunk.SegmentsLumbar.PelvisSeg;
   pelvis={AnyRefNode WidgetRotNode={
       ARel=Main.TrialSpecificData.InitialPositionOfBody.PelvisRotMatrix';
     };
   };
   
   AnyKinRotational Rot={
     AnyRefFrame &ref2 = Main.InitialPosStudy.EnvironmentModel.GlobalRef;
     AnyRefNode &pelvis = Main.HumanModel.BodyModel.Trunk.SegmentsLumbar.PelvisSeg.WidgetRotNode;
     Type=RotVector;
     
   };
   
 };
 
 
 
};//Drivers
